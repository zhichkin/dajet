## DaJet Script

[Начало](https://github.com/zhichkin/dajet/tree/main/doc/dajet-script/README.md)

### Произвольные запросы СУБД на "родном" SQL

Начиная с версии **DaJet Script 3.9.8**, расширены возможности команды **REQUEST** для выполнения произвольных запросов к СУБД на соответствующем "родном" для неё диалекте SQL.

Поддерживаются следующие СУБД:
- Sqlite
- SQL Server
- PostgreSQL

Для переключения команды **REQUEST** в режим выполнения произвольных запросов SQL необходимо в строке подключения после ```?``` добавить параметр ```sql```. Например вот так:

```
REQUEST 'pgsql://postgres:postgres@localhost:5432/database?sql'
```
**\<url\>** - URL адрес запроса.<br>
**\<condition\>** - условие выполнения запроса: если условие не выполняется, то запрос тоже. Предложение **WHEN** опционально.<br>
**\<headers\>** - стандартные и пользовательские заголовки запроса.<br>
**\<options\>** - параметры выполнения запроса (смотри ниже).<br>
**\<variable\>** - переменная типа ```object```, имеющая предопределённый набор свойств (смотри ниже). В эту переменную возвращается результат выполнения запроса, то есть http-ответ (response).

**Таблица опций (настроек) команды REQUEST**
|**Параметр**|**Тип данных**|**Описание**|
|------------|--------------|------------|
|Script|string|Текст выполняемого запроса SQL, переменная строкового типа или ссылка на файл, который содержит скрипт SQL.|
|Timeout|number|Таймаут выполнения команды SQL в секундах. Значение по умолчанию: 30.|
|Transaction|string|Необязательная опция для выполнения команды SQL в транзакции. По умолчанию команда выполняется без открытия транзакции СУБД. Допустимые значения (разные СУБД поддерживают только те или иные значения):<br>- 'ReadUncommitted'<br>- 'ReadCommitted'<br>- 'RepeatableRead'<br>- 'Serializable'<br>- 'Snapshot'|

[Наверх](#произвольные-запросы-субд-на-родном-sql)
